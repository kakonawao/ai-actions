name: Trigger Revise Agent

on:
  pull_request_review:
    types: [submitted]

permissions:
  contents: write
  pull-requests: write

jobs:
  call-revise-agent:
    if: contains(github.event.review.body, '@bot revise')
    uses: ./.github/workflows/revise-agent.yml
    with:
      pr_number: ${{ github.event.pull_request.number }}
      branch: ${{ github.event.pull_request.head.ref }}
    secrets:
      GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
